var spectrum_obj=function(){this.create=function(s,o){for(void 0===o.amount?amount=16:amount=o.amount,void 0===o.color?color="#1F1":color=o.color,void 0===o.height?heightmult=1:heightmult=o.height,void 0===o.speed?speed=400:speed=o.speed,void 0===o.mode?mode="middle":mode=o.mode,void 0===o.nocss?nocss=!1:nocss=o.nocss,parentwidth=s.width(),containerwidth=parentwidth/amount,linewidth=containerwidth/1.2,marginheight=s.height()/2,i=0;i<amount;i++)$(s).append($('<span class="spectrum-line"></span>'));var e=t([{r:255,g:0,b:0},{r:255,g:127,b:0},{r:255,g:255,b:0},{r:0,g:255,b:0},{r:0,g:0,b:255},{r:75,g:0,b:130},{r:148,g:0,b:211}],o.amount);return counteach=0,$(".spectrum-line").each(function(){if(!nocss)switch($(this).css("display","none"),"rainbow"===o.color?($(this).css("color","#FFF"),$(this).css("background-color","rgb("+Math.round(e[counteach].r)+", "+Math.round(e[counteach].g)+", "+Math.round(e[counteach].b)+")")):$(this).css("background-color",color),$(this).css("width",linewidth+"px"),$(this).css("position","absolute"),$(this).css("bottom","0"),$(this).css("height","100%"),$(this).css("transition","0.3s ease"),$(this).css("vertical-align","bottom"),mode){case"top":$(this).css("margin-bottom","0px");break;case"middle":$(this).css("margin-bottom",marginheight+"px");break;case"bottom":$(this).css("margin-bottom",2*marginheight+"px"),$(this).css("margin-bottom","0px"),$(this).parent().css("-webkit-transform","scaleY(-1)"),$(this).parent().css("transform","scaleY(-1)")}counteach+=1}),setInterval(function(){count=0,$(".spectrum-line").each(function(){$(this).css("left",containerwidth*count+"px"),$(this).css("display","inline-block");var t=Math.random();switch(mode){case"top":$(this).css("bottom","0%"),$(this).css("height",100*t*heightmult+"%");break;case"middle":$(this).css("bottom","-"+100*t*heightmult/2+"%"),$(this).css("height",100*t*heightmult+"%");break;case"bottom":$(this).css("bottom","0%"),$(this).css("height",100*t*heightmult+"%")}count+=1})},speed),spectrum};var t=function(t,o){var i,e,c,n=(o-1)/(t.length-1),h=Math.min(t.length-1,o),r=0,a=1,m=[];for(i=0;i<h;i++)a=Math.max(r+2,a+n),c=Math.round(a)-Math.round(r),e=s(t[i],t[i+1],c),m.pop(),m=m.concat(e),r=Math.round(a)-1;return m},s=function(t,s,o){var i,e=(s.r-t.r)/(o-1),c=(s.g-t.g)/(o-1),n=(s.b-t.b)/(o-1),h=[],r=t.r,a=t.g,m=t.b;for(i=0;i<o;i++)h.push({r:r,b:m,g:a}),r+=e,a+=c,m+=n;return h}},spectrum=new spectrum_obj;